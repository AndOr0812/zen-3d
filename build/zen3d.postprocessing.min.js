!function(){var e=function(e){this.renderer=e,this.passes=[],this.renderTarget1=new zen3d.RenderTarget2D(e.width,e.height),this.renderTarget1.texture.minFilter=zen3d.WEBGL_TEXTURE_FILTER.LINEAR,this.renderTarget1.texture.magFilter=zen3d.WEBGL_TEXTURE_FILTER.LINEAR,this.renderTarget2=new zen3d.RenderTarget2D(e.width,e.height),this.renderTarget2.texture.minFilter=zen3d.WEBGL_TEXTURE_FILTER.LINEAR,this.renderTarget2.texture.magFilter=zen3d.WEBGL_TEXTURE_FILTER.LINEAR,this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2};e.prototype.swapBuffers=function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},e.prototype.resize=function(e,r){this.renderTarget1.resize(e,r),this.renderTarget2.resize(e,r)},e.prototype.addPass=function(e){this.passes.push(e)},e.prototype.render=function(e,r){var t=this.renderer;t.render(e,r,this.readBuffer,!0);for(var s=0;s<this.passes.length;s++){var n=this.passes[s];s===this.passes.length-1?(n.render(t,this.readBuffer,void 0),this.swapBuffers()):(n.render(t,this.readBuffer,this.writeBuffer),this.swapBuffers())}},zen3d.EffectComposer=e}(),function(){var e=function(e,r,t){var s=this.scene=new zen3d.Scene,n=this.camera=new zen3d.Camera;n.position.set(0,1,0),n.setLookAt(new zen3d.Vector3(0,0,0),new zen3d.Vector3(0,0,-1)),n.setOrtho(-1,1,-1,1,.1,2),s.add(n);var i=new zen3d.PlaneGeometry(2,2,1,1),d=this.shader=new zen3d.ShaderMaterial(e,r,t),a=new zen3d.Mesh(i,d);s.add(a)};e.prototype.render=function(e,r,t){this.shader.diffuseMap=r.texture,e.render(this.scene,this.camera,t,void 0!=t)},zen3d.Pass=e}();